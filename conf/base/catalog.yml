# Data catalog for dissection pipeline

# Intermediate dataset for dissected data (will be used by graph_construction)
#Fichier json juste pour un fichier pcap je l'ai fais juste pour tester 
dissected_data:
  type: json.JSONDataset
  filepath: data/02_intermediate/dissected_data.json

# Input : fichier JSON : complet envoye par thomas apres la dissection
input_trace_file:
  type: json.JSONDataset
  filepath: data/02_intermediate/filtered_1.json

# =>Output : graph_construction => Input Graph vectorisé 
complete_graph_pickle:
  type: pickle.PickleDataset  
  filepath: data/03_primary/network_graph.pkl

graph_html_output:
  type: text.TextDataset  
  filepath: data/08_reporting/graph_status.txt

# Graphe vectorisé 
vectorized_graph:
  type: pickle.PickleDataset
  filepath: data/04_feature/vectorized_graph.pkl

vectorization_report:
  type: json.JSONDataset
  filepath: data/08_reporting/vectorization_report.json

vectorization_summary:
  type: json.JSONDataset
  filepath: data/08_reporting/vectorization_summary.json


# Graphe vectorisé : baseline TF-IDF + GMM
# Graphe vectorisé avec méthode baseline
baseline_vectorized_graph:
  type: pickle.PickleDataset
  filepath: data/04_feature/baseline_vectorized_graph.pkl

# Rapport de vectorisation baseline
baseline_vectorization_report:
  type: text.TextDataset
  filepath: data/08_reporting/baseline_vectorization_report.json

# === CONVERSION GNN : Pipeline Vectorisation ===
gnn_pytorch_data:
  type: pickle.PickleDataset
  filepath: data/05_model_input/gnn_pytorch_data.pkl

conversion_metadata:
  type: pickle.PickleDataset
  filepath: data/08_reporting/conversion_metadata.pkl

conversion_validation_report:
  type: json.JSONDataset
  filepath: data/08_reporting/conversion_validation_report.json

conversion_quality_report:
  type: json.JSONDataset
  filepath: data/08_reporting/conversion_quality_report.json

# === CONVERSION GNN - SYSTÈME BASELINE ===
baseline_gnn_pytorch_data:
  type: pickle.PickleDataset
  filepath: data/05_model_input/baseline_gnn_pytorch_data.pkl

baseline_conversion_metadata:
  type: pickle.PickleDataset
  filepath: data/08_reporting/baseline_conversion_metadata.pkl

baseline_conversion_validation_report:
  type: json.JSONDataset
  filepath: data/08_reporting/baseline_conversion_validation_report.json

baseline_conversion_quality_report:
  type: json.JSONDataset
  filepath: data/08_reporting/baseline_conversion_quality_report.json

# Configuration catalog pour gnn_sampling
# Ajouter dans conf/base/catalog.yml

# Données intermédiaires
subgraphs_main_raw:
  type: pickle.PickleDataset
  filepath: data/05_model_input/gnn_sampling/subgraphs_main_raw.pkl

subgraphs_baseline_raw:
  type: pickle.PickleDataset
  filepath: data/05_model_input/gnn_sampling/subgraphs_baseline_raw.pkl

# Données finales pour entraînement
training_data_main:
  type: pickle.PickleDataset
  filepath: data/05_model_input/gnn_training/training_data_main.pkl

training_data_baseline:
  type: pickle.PickleDataset
  filepath: data/05_model_input/gnn_training/training_data_baseline.pkl

# MAIN
train_val_split_main:
  type: pickle.PickleDataset
  filepath: data/05_model_input/gnn_training/train_val_split_main.pkl

gnn_training_results_main:
  type: pickle.PickleDataset
  filepath: data/06_models/gnn_training_results_main.pkl

# BASELINE  
train_val_split_baseline:
  type: pickle.PickleDataset
  filepath: data/05_model_input/gnn_training/train_val_split_baseline.pkl

gnn_training_results_baseline:
  type: pickle.PickleDataset
  filepath: data/06_models/gnn_training_results_baseline.pkl

# COMPARAISON
model_comparison:
  type: pickle.PickleDataset
  filepath: data/08_reporting/gnn/model_comparison.pkl

# Graphiques GNN entraînement
training_curves_fig:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/gnn/training_curves.png
  save_args:
    dpi: 300
    bbox_inches: tight
    facecolor: white

error_histograms_fig:
  type: matplotlib.MatplotlibWriter  
  filepath: data/08_reporting/gnn/error_histograms.png
  save_args:
    dpi: 300
    bbox_inches: tight
    facecolor: white

training_summary_fig:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/gnn/training_summary.png
  save_args:
    dpi: 300
    bbox_inches: tight
    facecolor: white
